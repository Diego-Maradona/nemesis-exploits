
// Magic eye script

// Useful if someone just game you a random code and you don't even know what's on it

// Will spawn in 1 bot to examine the output of the game as it goes on

const kh = require('kahoot.js-updated');

const pin = 0 // Game to join
const name = 'NEMESIS_MAGICEYE' // Name to join as

// Code below..

const client = new kh;

client.join(pin, name)

client.on('joined', () => {
  console.log(`Nemesis magiceye script loaded`)
  console.log(`Logged in as: ${name}`)
  console.log(`Joined: ${pin}`)
});

client.on('quiz', quiz =>{
  console.log('Quiz started')
  console.log(`Quiz name: ${quiz.name}`)
  console.log(`Quiz type: ${quiz.type}`)
});  

client.on("question", question => { 
		console.log("Recieved new question, awaiting answer...")
});

client.on('questionStart', q => {
  console.log('Question live, answering...')
  q.answer(Math.floor(Math.random() * 4));
});

client.on("questionEnd", e => {
	console.log("Question ended");
	if (e.correct) {
		console.log("Question answered was correct");
	} else {
		console.log("Question answwered was incorrect, was", e.correctAnswer);
    console.log('')
	}
});
    
client.on("questionSubmit", event => {
		console.log("Answer submitted");
    console.log(`Waiting message sent by kahoot: ${event.message}`)
    console.log('')
});

client.on("finishText", () => {
  console.log('Quiz has finished, terminating bot connection')
  client.leave()
});

